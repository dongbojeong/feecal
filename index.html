<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>시설공사 수수료 계산기</title>
</head>
<body>
    <h1>시설공사 수수료 계산기</h1>
    
    <label for="contractAmount">계약금액(천단위 구분): </label>
    <input type="text" id="contractAmount" oninput="formatAmount(this)" placeholder="1,000,000">
    
    <label for="category">구분: </label>
    <select id="category">
        <option value="국가기관">국가기관</option>
        <option value="지방자치단체">지방자치단체</option>
    </select>
    
    <label for="rateType">요율: </label>
    <button onclick="calculateFee('A')">A Type</button>
    <button onclick="calculateFee('B')">B Type</button>
    <button onclick="calculateFee('C')">C Type</button>
    <button onclick="calculateFee('D')">D Type</button>
    
    <h3>산출내역</h3>
    <div id="result"></div>

    <p>※ 이 프로그램은 계약조건에 따라 수수료가 변경될 수도 있습니다!</p>

    <script>
        function formatAmount(input) {
            input.value = input.value.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        }

        const rates = {
            "국가기관": {
                "A": { /* 요율 정보 */ },
                "B": { /* 요율 정보 */ },
                "C": { /* 요율 정보 */ },
                "D": { /* 요율 정보 */ }
            },
            "지방자치단체": {
                "A": { /* 요율 정보 */ },
                "B": { /* 요율 정보 */ },
                "C": { /* 요율 정보 */ },
                "D": { /* 요율 정보 */ }
            }
        };

        function calculateFee(type) {
            const amountString = document.getElementById('contractAmount').value.replace(/,/g, '');
            const contractAmount = parseFloat(amountString);
            const category = document.getElementById('category').value;
            const rate = getRateForAmount(contractAmount, rates[category][type]);

            if (!isNaN(contractAmount) && rate) {
                const fee = contractAmount * rate;
                const feeFormatted = fee.toFixed(3).replace(/\B(?=(\d{3})+(?!\d))/g, ','); // 천단위 구분자 추가
                const truncatedFee = Math.floor(fee / 10) * 10; // 소수점 이하 원단위 절삭
                
                document.getElementById('result').innerHTML = `
                    계약금액 ${contractAmount.toLocaleString()}원을 기준할시 아래 계산에 따라<br>
                    ${contractAmount.toLocaleString()} * ${rate} = ${feeFormatted}<br>
                    계: ${truncatedFee.toLocaleString()} 원
                `;
            } else {
                document.getElementById('result').innerHTML = "계약금액을 입력해 주세요.";
            }
        }

        function getRateForAmount(amount, rateTable) {
            if (amount <= 1000000000) {
                return rateTable["10억이하"];
            } else if (amount <= 50000000000) {
                return rateTable["10억초과50억이하"];
            } else if (amount <= 100000000000) {
                return rateTable["50억초과100억이하"];
            } else if (amount <= 500000000000) {
                return rateTable["100억초과500억이하"];
            } else {
                return rateTable["500억초과"];
            }
        }
    </script>
</body>
</html>
